(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();const q={dateSettings:{hideDate:!1,hideTime:!1,hideDays:!1,hideMonths:!1,hideYears:!1,hideHours:!1,hideMinutes:!1,hideSeconds:!1},batterySettings:{hideBattery:!1},networkSettings:{hideNetworkLatency:!1,pingRefreshTime:5},vibrationSettings:{hideVibration:!1}},F=()=>{const e=localStorage.getItem("settings");return e===null?(localStorage.setItem("settings",JSON.stringify(q)),JSON.parse(localStorage.getItem("settings"))):JSON.parse(e)},x=async()=>{const e=new Date;return await fetch("https://picsum.photos/"),new Date().getTime()-e.getTime()},C=new WeakSet,j=new CustomEvent("onStateChange"),G=(e,t)=>{const s={get:(n,i)=>typeof n[i]=="object"&&!C.has(n[i])?(C.add(n[i]),new Proxy(n[i],s)):n[i],set:(n,i,a)=>(n[i]=a,t(),!0)};return new Proxy(e,s)},A=e=>G(e,()=>{document.dispatchEvent(j)}),o=A({windows:[],settings:{},isMobile:!1,tictactoeScores:[]}),H=e=>{o.windows=e},v=(e,t)=>{const{windows:s}=o;for(const n in o.windows)o.windows[n].uuid===e&&(o.windows[n].isHidden=t);o.windows=s},E=(e,t)=>{const{windows:s}=o;for(const n in s)s[n].uuid===e?s[n].isFocused=t:s[n].isFocused=!1;o.windows=s},J=async()=>{const e=await F();o.settings=e},_=()=>{const e=indexedDB.open("NavigOS",5);e.onerror=()=>{throw new Error("IndexedDB connection failed")},e.onsuccess=t=>{const a=t.target.result.transaction(["tictactoe"]).objectStore("tictactoe").getAll();a.onsuccess=()=>{o.tictactoeScores=a.result,console.log(o)},a.onerror=()=>{throw new Error(a.error.message)}}},R=e=>{o.settings=e,localStorage.setItem("settings",JSON.stringify(e))},z=()=>{const e=indexedDB.open("NavigOS",5);e.onerror=()=>{throw new Error("IndexedDB connection failed")},e.onupgradeneeded=t=>{const s=t.target.result;s.onerror=n=>{throw new Error(`Database error: ${n.target.message}`)},s.createObjectStore("tictactoe",{keyPath:"score"})},e.onsuccess=()=>{_()}};const Y=e=>Object.prototype.hasOwnProperty.call(e,"children"),V=e=>Object.prototype.hasOwnProperty.call(e,"text"),K=(e,t)=>{for(const s in t)typeof t[s]=="function"?e.addEventListener(s,t[s]):s!=="tagName"&&s!=="children"&&s!=="text"&&e.setAttribute(s,t[s])},b=(e,t=null,s=null,n=0)=>{const i=e.length,a=Array.isArray(e)?e[n]:e,c=document.createElement(a.tagName);if(K(c,a),t!==null&&t.appendChild(c),t===null&&i>1&&(s===null&&(s=new DocumentFragment),s.appendChild(c)),V(a)){const r=document.createTextNode(a.text);c.appendChild(r)}return Y(a)&&b(a.children,c,s),n+1<i&&b(e,t,s,n+1),s!==null?s:c},h=e=>b(e),Q=e=>{const{windows:t}=o;for(const s of t)if(s.uuid===e)return s.isMaximized;return!1},$=e=>{const{windows:t}=o;for(const s of t)if(s.uuid===e)return s.isHidden;return!1},X=e=>{const{windows:t}=o;for(const s of t)if(s.uuid===e)return s.isFocused;return!1},N=e=>document.querySelector(`[data-uuid=${e}]`),S=()=>{const e=[],t=new Date(Date.now()),s=o.settings.dateSettings;let n=t.getDate().toString(),i=(t.getMonth()+1).toString();const a=t.getFullYear().toString();return s.hideDays||(parseInt(n)<10&&(n=`0${n}`),e.push(n)),s.hideMonths||(parseInt(i)<10&&(i=`0${i}`),e.push(i)),s.hideYears||e.push(a),e.join("/")},T=()=>{const e=[],t=new Date(Date.now()),s=o.settings.dateSettings;let n=t.getSeconds().toString(),i=t.getMinutes().toString(),a=t.getHours().toString();return s.hideHours||(parseInt(a)<10&&(a=`0${a}`),e.push(a)),s.hideMinutes||(parseInt(i)<10&&(i=`0${i}`),e.push(i)),s.hideSeconds||(parseInt(n)<10&&(n=`0${n}`),e.push(n)),e.join(":")},M=()=>{const e=[],t=new Date(Date.now());let s=t.getSeconds().toString(),n=t.getMinutes().toString(),i=t.getHours().toString();return parseInt(i)<10&&(i=`0${i}`),e.push(i),parseInt(n)<10&&(n=`0${n}`),e.push(n),parseInt(s)<10&&(s=`0${s}`),e.push(s),e.join(":")},k=()=>o.settings,Z=(e,t)=>{N(t).remove(),e=e.filter(n=>n.uuid!==t),H(e)},U=e=>{const t=N(e);t.style.display="none",t.style.zIndex="0",v(e,!0)},O=e=>{const t=N(e),{windows:s}=o;for(const n of s){const i=N(n.uuid);n.uuid===e?(t.style.zIndex="10",console.log(e)):(console.log(i),i.style.zIndex="0")}t.style.display="block",v(e,!1)},I=e=>{const t=$(e);t?O(e):U(e),E(e,t),v(e,!t)},ee=e=>{X(e)?I(e):(O(e),E(e,!0))},te=e=>{const t={tagName:"div",class:"navbar-window-icon",click:()=>ee(e.uuid),children:{tagName:"img",src:e.iconPath}},s=h(t);return e.isFocused&&(s.style.background="#5F5F5F",s.style.padding="10px 14px",s.style.margin="0px 1px"),s},se=(e,t)=>{t.innerHTML="";for(const s of e){const n=te(s);t.appendChild(n)}},ne=()=>{const e={tagName:"nav",class:"navbar-container",children:[{tagName:"div",class:"navbar-windows-icon-container"},{tagName:"div",class:"navbar-general-data",children:[{tagName:"div",class:"navbar-battery",children:[{tagName:"div",class:"navbar-battery-progress-bar-container",children:{tagName:"div",class:"navbar-battery-progress-bar"}},{tagName:"div",class:"navbar-battery-text"}]},{tagName:"div",class:"navbar-network",children:[{tagName:"img",class:"navbar-network-icon",src:"https://stabien.github.io/esgi-js-s1-prod/icon_network.png",alt:"network-icon"},{tagName:"span",class:"navbar-network-latency"}]},{tagName:"div",class:"navbar-datetime-container",children:[{tagName:"span",class:"navbar-time",text:T()},{tagName:"span",class:"navbar-date",text:S()}]}]}]},t=h(e),s=t.getElementsByClassName("navbar-time")[0],n=t.getElementsByClassName("navbar-date")[0],i=t.getElementsByClassName("navbar-network")[0],a=t.getElementsByClassName("navbar-network-latency")[0],c=t.getElementsByClassName("navbar-battery")[0],r=c.getElementsByClassName("navbar-battery-progress-bar")[0],g=c.getElementsByClassName("navbar-battery-text")[0];let d=o.windows,l=k();return document.addEventListener("onStateChange",()=>{const m=t.getElementsByClassName("navbar-windows-icon-container")[0];d=o.windows,se(d,m),l=k(),l.batterySettings.hideBattery?c.style.display="none":c.style.display="block",l.networkSettings.hideNetworkLatency?i.style.display="none":i.style.display="block",l.dateSettings.hideDate?n.style.display="none":n.style.display="block",l.dateSettings.hideTime?s.style.display="none":s.style.display="block"}),setInterval(()=>{s.innerHTML=T(),n.innerHTML=S()},1e3),x().then(m=>{l.networkSettings.hideNetworkLatency||(a.innerHTML=`${m.toString()}ms`,setInterval(async()=>{try{const u=await x();a.innerHTML=`${u.toString()}ms`}catch(u){throw new Error(u)}},5e3))}).catch(m=>{throw new Error(m)}),navigator.getBattery().then(m=>{if(!l.batterySettings.hideBattery){const u=`${(m.level*100).toString()}%`;g.innerHTML=u,r.style.width=u,m.addEventListener("levelchange",()=>{const y=`${(m.level*100).toString()}%`;g.innerHTML=y,r.style.width=y})}}).catch(m=>{throw new Error(m)}),t};const p=(e,t)=>{let s="";for(let n=0;n<e;n++){const i=Math.floor(Math.random()*t.length);s+=t[i]}return s},P=()=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t=p(7,e),s=p(4,e),n=p(4,e),i=p(4,e),a=p(12,e);return`A${t}-${s}-${n}-${i}-${a}`},ie=`
  background-color: rgb(235, 244, 251, 0.7); 
  border-color: rgb(235, 244, 251, 0.7)
`,L="background-color: none; border-color: none",f=(e,t,s)=>{const n=()=>{s(),c.setAttribute("style",L)},a={tagName:"div",class:"icon-container","data-uuid":P(),dblclick:n,children:[{tagName:"img",src:t,onselectstart:"return false"},{tagName:"h2",text:e,onselectstart:"return false"}]},c=h(a);return document.addEventListener("click",r=>{r.target.closest(".icon-container")===c?c.setAttribute("style",ie):c.setAttribute("style",L)}),c};const B=(e,t,s)=>{const n=P(),a=h({tagName:"div",class:"window-container","data-uuid":n,children:[{tagName:"div",class:"window-header",children:[{tagName:"div",class:"window-header-title-container",children:[{tagName:"img",class:"window-header-icon",src:t},{tagName:"h2",class:"window-header-title",text:e}]},{tagName:"div",class:"window-header-buttons-container",children:[{tagName:"button",class:"window-button-hide",click:()=>I(n),children:{tagName:"img",class:"window-icon-hide",src:"https://stabien.github.io/esgi-js-s1-prod/icon_hide.png",alt:"icon-hide"}},{tagName:"button",class:"window-button-close",click:()=>Z(d,n),children:{tagName:"img",class:"window-icon-close",src:"https://stabien.github.io/esgi-js-s1-prod/icon_close.png",alt:"icon-close"}}]}]},{tagName:"div",class:"window-content"}]}),c=a.getElementsByClassName("window-content")[0],r=Q(n),g=$(n);let d=o.windows;const l={uuid:n,iconPath:t,isMaximized:r,isHidden:g,isFocused:!0};return a.style.width=`${s.width}px`,c.style.height=`${s.height}px`,document.addEventListener("onStateChange",()=>{d=o.windows}),H([...d,l]),E(n,!0),a};const ae=(e,t)=>{const s=t.getElementsByClassName("tictactoe-grid-box"),i=t.getElementsByClassName("tictactoe-header")[0].getElementsByTagName("span")[1];for(let a=0;a<s.length;a++)s[a].innerHTML="";e.isGameOver&&(i.innerHTML=`Joueur ${e.isPlayerOneBeginning?"1":"2"} commence`),e.isPlayerOneTurn=e.isPlayerOneBeginning,e.board=e.board.fill(""),e.isGameOver=!1,e.hasGameStarded=!0},ce=(e,t,s)=>{const i=s.getElementsByClassName("tictactoe-header")[0].getElementsByTagName("span")[0];e.isPlayerOneBeginning=!e.isPlayerOneBeginning,e.isGameOver=!0,t==="x"?e.currentScore[0]+=1:t==="o"&&(e.currentScore[1]+=1),i.innerHTML=`J1: ${e.currentScore[0]} - J2: ${e.currentScore[1]}`},oe=e=>{for(let t=0;t<3;t++)if(e[t]!==""&&e[t]===e[t+3]&&e[t+3]===e[t+6])return e[t];for(let t=0;t<7;t+=3)if(e[t]!==""&&e[t]===e[t+1]&&e[t+1]===e[t+2])return e[t];if(e[4]!==""){if(e[0]===e[4]&&e[4]===e[8])return e[0];if(e[2]===e[4]&&e[4]===e[6])return e[2]}return e.includes("")?!1:"="},le=(e,t)=>{const s=e.currentTarget,n=s.closest(".tictactoe-container"),i=parseInt(s.getAttribute("data-index"));if(!t.isGameOver){if(!s.hasChildNodes()){const c=t.isPlayerOneTurn?"cross":"circle",r=t.isPlayerOneTurn?"x":"o",g={tagName:"img",src:`https://stabien.github.io/esgi-js-s1-prod/tictactoe_${c}_icon.png`,alt:`${c}`,class:`${c}`},d=h(g);t.isPlayerOneTurn=!t.isPlayerOneTurn,t.board[i]=r,s.append(d)}const a=oe(t.board);a!==!1&&ce(t,a,n)}},re=e=>{const t=[];for(let s=0;s<9;s++){const n={tagName:"div",class:"tictactoe-grid-box","data-index":s,click:i=>le(i,e)};t.push(n)}return t},de=()=>{const e={hasGameStarded:!1,isPlayerOneTurn:!0,board:["","","","","","","","",""],isGameOver:!1,isPlayerOneBeginning:!0,currentScore:[0,0]},t=B("Tic Tac Toe","https://stabien.github.io/esgi-js-s1-prod/icon_tictactoe.png",{width:600,height:600}),s=re(e),i=h({tagName:"div",class:"tictactoe-container",children:[{tagName:"div",class:"tictactoe-header",children:[{tagName:"h2",text:"Score"},{tagName:"span",text:"J1 : 0 - J2 : 0"},{tagName:"span",text:"Joueur 1 commence"}]},{tagName:"div",class:"tictactoe-grid",children:s},{tagName:"button",class:"tictactoe-start-button",text:"Recommencer une partie",click:()=>ae(e,i)}]});return t.getElementsByClassName("window-content")[0].appendChild(i),t};const me=(e,t,s)=>{if(s!==null)return s;const n=t.getElementsByClassName("clock-timer-hours")[0],i=t.getElementsByClassName("clock-timer-minutes")[0],a=t.getElementsByClassName("clock-timer-seconds")[0],c=t.getElementsByClassName("clock-timer-milliseconds")[0];return console.log(t),setInterval(()=>{e.millisecond+=1,e.millisecond>99&&(e.second+=1,e.millisecond=0),e.second>59&&(e.minute+=1,e.second=0),e.minute>59&&(e.hour+=1,e.minute=0),e.millisecond<10?c.innerHTML=` 0${e.millisecond}`:c.innerHTML=` ${e.millisecond}`,e.second<10?a.innerHTML=` 0${e.second} :`:a.innerHTML=` ${e.second} :`,e.minute<10?i.innerHTML=` 0${e.minute} :`:i.innerHTML=` ${e.minute} :`,e.hour<10?n.innerHTML=`0${e.hour} :`:n.innerHTML=`${e.minute} :`},10)},ge=()=>{const e={tagName:"div",class:"clock-container",children:[{tagName:"div",class:"clock-time-container",children:{tagName:"span",class:"clock-time",text:M()}},{tagName:"div",class:"clock-timer-container",children:[{tagName:"div",class:"clock-timer",children:[{tagName:"span",class:"clock-timer-hours",text:"00 : "},{tagName:"span",class:"clock-timer-minutes",text:" 00 : "},{tagName:"span",class:"clock-timer-seconds",text:" 00 : "},{tagName:"span",class:"clock-timer-milliseconds",text:" 00"}]},{tagName:"div",class:"clock-timer-buttons",children:[{tagName:"button",class:"clock-timer-start",text:"Commencer"},{tagName:"button",class:"clock-timer-stop",text:"Stop"},{tagName:"button",class:"clock-timer-reset",text:"R\xE9initialiser"}]}]}]},t=B("Horloge","https://stabien.github.io/esgi-js-s1-prod/icon_clock.png",{width:600,height:600}),s=h(e),n=s.getElementsByClassName("clock-time")[0],i=s.getElementsByClassName("clock-timer")[0],a=t.getElementsByClassName("window-content")[0],c=s.getElementsByClassName("clock-timer-start")[0],r=s.getElementsByClassName("clock-timer-stop")[0],g=s.getElementsByClassName("clock-timer-reset")[0],d={hour:0,minute:0,second:0,millisecond:0};let l=null;return c.addEventListener("click",()=>{l=me(d,i,l),r.style.display="inline-block",c.style.display="none",c.innerHTML="Reprendre"}),r.addEventListener("click",()=>{l!==null&&(clearInterval(l),l=null),r.style.display="none",c.style.display="inline-block"}),g.addEventListener("click",()=>{const m=s.getElementsByClassName("clock-timer-hours")[0],u=s.getElementsByClassName("clock-timer-minutes")[0],y=s.getElementsByClassName("clock-timer-seconds")[0],w=s.getElementsByClassName("clock-timer-milliseconds")[0];l!==null&&(clearInterval(l),l=null),r.style.display="none",c.style.display="inline-block",c.innerHTML="Commencer",d.hour=0,d.minute=0,d.second=0,d.millisecond=0,m.innerHTML="00 :",u.innerHTML=" 00 :",y.innerHTML=" 00 :",w.innerHTML=" 00"}),a.appendChild(s),setInterval(()=>{n.innerHTML=M()},1e3),t};const ue=e=>({dateSettings:{hideDate:e.getElementsByClassName("settings-date-display")[0].checked,hideTime:e.getElementsByClassName("settings-time-display")[0].checked,hideDays:e.getElementsByClassName("settings-days-display")[0].checked,hideMonths:e.getElementsByClassName("settings-months-display")[0].checked,hideYears:e.getElementsByClassName("settings-years-display")[0].checked,hideHours:e.getElementsByClassName("settings-hours-display")[0].checked,hideMinutes:e.getElementsByClassName("settings-minutes-display")[0].checked,hideSeconds:e.getElementsByClassName("settings-seconds-display")[0].checked},batterySettings:{hideBattery:e.getElementsByClassName("settings-battery-display")[0].checked},networkSettings:{hideNetworkLatency:e.getElementsByClassName("settings-network-latency-display")[0].checked,pingRefreshTime:e.getElementsByClassName("settings-network-latency-display")[0].checked},vibrationSettings:{hideVibration:e.getElementsByClassName("settings-vibration-display")[0].checked}}),he=()=>{const e={tagName:"div",class:"settings-container",children:[{tagName:"div",class:"settings-date-container",children:[{tagName:"h2",class:"settings-date-title",text:"Date"},{tagName:"div",class:"settings-input-container",children:[{tagName:"label",for:"settings-date-display",text:"Masquer la date"},{tagName:"input",name:"settings-date-display",class:"settings-date-display",type:"checkbox"}]},{tagName:"div",class:"settings-input-container",children:[{tagName:"label",for:"settings-time-display",text:"Masquer l'heure"},{tagName:"input",name:"settings-time-display",class:"settings-time-display",type:"checkbox"}]},{tagName:"div",class:"settings-input-container",children:[{tagName:"label",for:"settings-days-display",text:"Masquer les jours"},{tagName:"input",name:"settings-days-display",class:"settings-days-display",type:"checkbox"}]},{tagName:"div",class:"settings-input-container",children:[{tagName:"label",for:"settings-months-display",text:"Masquer les mois"},{tagName:"input",name:"settings-months-display",class:"settings-months-display",type:"checkbox"}]},{tagName:"div",class:"settings-input-container",children:[{tagName:"label",for:"settings-years-display",text:"Masquer les ann\xE9es"},{tagName:"input",name:"settings-years-display",class:"settings-years-display",type:"checkbox"}]},{tagName:"div",class:"settings-input-container",children:[{tagName:"label",for:"settings-hours-display",text:"Masquer les heures"},{tagName:"input",name:"settings-hours-display",class:"settings-hours-display",type:"checkbox"}]},{tagName:"div",class:"settings-input-container",children:[{tagName:"label",for:"settings-minutes-display",text:"Masquer les minutes"},{tagName:"input",name:"settings-minutes-display",class:"settings-minutes-display",type:"checkbox"}]},{tagName:"div",class:"settings-input-container",children:[{tagName:"label",for:"settings-seconds-display",text:"Masquer les secondes"},{tagName:"input",name:"settings-seconds-display",class:"settings-seconds-display",type:"checkbox"}]}]},{tagName:"div",class:"settings-battery-container",children:[{tagName:"h2",class:"settings-battery-title",text:"Batterie"},{tagName:"div",class:"settings-input-container",children:[{tagName:"label",for:"settings-battery-display",text:"Masquer la batterie"},{tagName:"input",name:"settings-battery-display",class:"settings-battery-display",type:"checkbox"}]}]},{tagName:"div",class:"settings-network-container",children:[{tagName:"h2",class:"settings-network-title",text:"R\xE9seau"},{tagName:"div",class:"settings-input-container",children:[{tagName:"label",for:"settings-network-latency-display",text:"Masquer la latence r\xE9seau"},{tagName:"input",name:"settings-network-latency-display",class:"settings-network-latency-display",type:"checkbox"}]}]},{tagName:"div",class:"settings-vibration-container",children:[{tagName:"h2",class:"settings-vibration-title",text:"Vibration"},{tagName:"div",class:"settings-input-container",children:[{tagName:"label",for:"settings-vibration-display",text:"Masquer la vibration"},{tagName:"input",name:"settings-vibration-display",class:"settings-vibration-display",type:"checkbox"}]}]},{tagName:"input",type:"submit",class:"settings-save-button",value:"Enregistrer"}]};let t=k();const s=B("Param\xE8tres","https://stabien.github.io/esgi-js-s1-prod/icon_settings.png",{width:600,height:600}),n=h(e),i=s.getElementsByClassName("window-content")[0],a=n.getElementsByClassName("settings-save-button")[0],c=n.getElementsByClassName("settings-date-display")[0],r=n.getElementsByClassName("settings-time-display")[0],g=n.getElementsByClassName("settings-days-display")[0],d=n.getElementsByClassName("settings-months-display")[0],l=n.getElementsByClassName("settings-years-display")[0],m=n.getElementsByClassName("settings-hours-display")[0],u=n.getElementsByClassName("settings-minutes-display")[0],y=n.getElementsByClassName("settings-seconds-display")[0],w=n.getElementsByClassName("settings-battery-display")[0],W=n.getElementsByClassName("settings-network-latency-display")[0],D=n.getElementsByClassName("settings-vibration-display")[0];return c.checked=t.dateSettings.hideDate,r.checked=t.dateSettings.hideTime,g.checked=t.dateSettings.hideDays,d.checked=t.dateSettings.hideMonths,l.checked=t.dateSettings.hideYears,m.checked=t.dateSettings.hideHours,u.checked=t.dateSettings.hideMinutes,y.checked=t.dateSettings.hideSeconds,w.checked=t.batterySettings.hideBattery,W.checked=t.networkSettings.hideNetworkLatency,D.checked=t.vibrationSettings.hideVibration,a.addEventListener("click",()=>{t=ue(n),R(t)}),i.appendChild(n),s},ye=()=>{const t=h({tagName:"main",children:[{tagName:"div",class:"main-content",children:{tagName:"div",class:"icon-list"}},{tagName:"img",class:"background",src:"https://stabien.github.io/esgi-js-s1-prod/background.jpg",alt:"background"}]}),s=t.getElementsByClassName("icon-list")[0],n=t.getElementsByClassName("main-content")[0],i=ne();return s.appendChild(f("TicTacToe","https://stabien.github.io/esgi-js-s1-prod/icon_tictactoe.png",()=>{n.appendChild(de())})),s.appendChild(f("Horloge","https://stabien.github.io/esgi-js-s1-prod/icon_clock.png",()=>{n.appendChild(ge())})),s.appendChild(f("Param\xE8tres","https://stabien.github.io/esgi-js-s1-prod/icon_settings.png",()=>{n.appendChild(he())})),t.append(i),t};const pe=async()=>{z(),await J();const e=document.getElementsByTagName("body")[0],t=ye();e.append(t)};pe().catch(e=>console.log(e));
